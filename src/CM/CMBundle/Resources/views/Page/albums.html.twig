{% extends 'CMBundle:Page:layout.html.twig' %}

{% block body %}

    {% if is_granted('ROLE_USER') %}
        {{ render(controller('CMBundle:Fan:fanButton', {'userId': page.id, 'object': page|class_name})) }}
        {{ include('CMBundle:PageUser:requestAdd.html.twig') }}
    {% endif %}

    {{ include('CMBundle:Page:top.html.twig', {'inPage': 'image'}) }}


    {#<ul class="breadcrumb">
      <li><?php echo link_to('Home', '@homepage') ?></li>
      <li><?php echo link_to(__('Users'), '@page_list') ?></li>
      <li class="active"><?php echo $page ?></li>
    </ul>#}


    <div class="box">
        <div class="box-top row">
            <div class="col-lg-4"><h3><a href="{{ path('page_images', {'slug': page.slug}) }}">{{ show_icon('Image')|raw }}{{ 'Images'|trans }}</a></h3></div>
            <div class="col-lg-4 active"><h3><a href="{{ path('page_albums', {'slug': page.slug}) }}">{{ show_icon('Image')|raw }}{{ 'Albums'|trans }}</a></h3></div>
            <div class="col-lg-4"><h3><a href="{{ path('page_entities_albums', {'slug': page.slug}) }}">{{ show_icon('Image')|raw }}{{ 'Entities images'|trans }}</a></h3></div>
        </div>
        <div class="media-list objects">
            {% for album in albums %}
                <div class="media object">
                    <div class="meda-body">
                        {% if album.type == constant('CM\\CMBundle\\Entity\\ImageAlbum::TYPE_PROFILE') %}
                            <h4 class="media-heading">{{ album.id }}: {{ 'Profile images'|trans }}</h4>
                            {{ show_img_box(page.getImg | imagine_filter('350'), {'width': 150, 'height': 150, 'offset': page.imgOffset, 'link': '', 'link_attributes': {'class': 'pull-left img-thumbnail'}})|raw }}
                        {% elseif album.type == constant('CM\\CMBundle\\Entity\\ImageAlbum::TYPE_COVER') %}
                            <h4 class="media-heading">{{ album.id }}: {{ 'Cover images'|trans }}</h4>
                            {{ show_img_box(page.getCoverImg | imagine_filter('350'), {'width': 150, 'height': 150, 'offset': page.coverImgOffset, 'link': '', 'link_attributes': {'class': 'pull-left img-thumbnail'}})|raw }}
                        {% elseif album.type == constant('CM\\CMBundle\\Entity\\ImageAlbum::TYPE_BACKGROUND') %}
                            <h4 class="media-heading">{{ album.id }}: {{ 'Background images'|trans }}</h4>
                            {{ show_img_box(page.getBackgroundImg | imagine_filter('350'), {'width': 150, 'height': 150, 'link': '', 'link_attributes': {'class': 'pull-left img-thumbnail'}})|raw }}
                        {% elseif album.type == constant('CM\\CMBundle\\Entity\\ImageAlbum::TYPE_ALBUM') %}
                            <h4 class="media-heading">{{ album.id }}: {{ album }}</h4>

                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
    

    {#<?php slot('sidebar_slot3') ?>  
        <?php include_component('fan', 'pageFans', array('page' => $page)) ?>
    <?php end_slot() ?>#}
  
{% endblock %}


{#path('page_album_show', {'slug': page.slug, 'albumSlug': 'profile'})#}