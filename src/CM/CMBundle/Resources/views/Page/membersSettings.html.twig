{% extends "CMBundle:User:accountLayout.html.twig" %}



{% block section %}
    {{ 'Members of "%page%"'|trans({'%page%': page}) }}
{% endblock %}



{% block headingButtons %}
    <a href="{{ path('page_show', {slug: page.slug}) }}" class="btn btn-default btn-sm">{{ icon('Page') }} {{ 'View page'|trans }}</a>
{% endblock %}



{% block breadcrumbs %}
    <li><a href="{{ path('user_pages') }}">{{ 'Pages'|trans }}</a></li>
    <li><a href="{{ path('page_show', {slug: page.slug}) }}">{{ page }}</a></li>
    <li class="active">{{ 'Members'|trans }}</li>
{% endblock %}



{% block main %}
    <div class="box">
        <div class="box-body">
            {{ form_start(form) }}
                {{ form_row(form) }}
                <div class="text-right">
                    <a href="{{ path(app.request.attributes.get('_route'), {slug: page.slug}) }}" class="btn btn-default">{{ 'Cancel'|trans }}</a>
                    <button type="submit" name="commit" class="btn btn-primary">{{ 'Save'|trans }}</button>
                </div>
            {{ form_end(form) }}
        </div>
    </div>
{% endblock %}



{% form_theme form _self %}

{% block _cm_cmbundle_pageuser_collection_pages_row %}
    <div class="form-group protagonist_typeahead" typeahead-callback="{{ path('page_member_add', {'pageId': 1, 'user_id': 'USER_ID'}) }}">
        <div class="collection-items">
            <div id="protagonists_finder_container" class="form-group">
                <label class="control-label col-md-3">{{ 'Add new member'|trans }}</label>
                <div class="col-md-9"><input type="text" id="protagonists_finder" class="form-control" /></div>
            </div>
            {{ include('CMBundle:Page:member.html.twig', {pageUsers: form}) }}
        </div>
    </div>
{% endblock %}