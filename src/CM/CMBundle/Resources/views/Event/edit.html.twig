{% extends 'CMBundle::layout.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
    {% stylesheets
        '@CMBundle/Resources/public/css/typeahead.js-bootstrap.css'
    %}
        <link href="{{ asset_url }}" type="text/css" rel="stylesheet" media="screen" />
    {% endstylesheets %}

    <style>
      [gmap-canvas] {
        height: 200px;
        width: 100%;
        margin: 0px;
        padding: 0px;
      }
      .controls {
        margin-top: 16px;
        border: 1px solid transparent;
        border-radius: 2px 0 0 2px;
        box-sizing: border-box;
        -moz-box-sizing: border-box;
        height: 32px;
        outline: none;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
      }

      [gmap-input] {
        background-color: #fff;
        padding: 0 11px 0 13px;
        width: 400px;
        font-family: Roboto;
        font-size: 15px;
        font-weight: 300;
        text-overflow: ellipsis;
      }

      [gmap-input]:focus {
        border-color: #4d90fe;
        margin-left: -1px;
        padding-left: 14px;  /* Regular padding-left + 1. */
        width: 401px;
      }

      .pac-container {
        font-family: Roboto;
      }

    </style>
{% endblock %}

{% block body %}
    {{ form_start(form) }}
        {{ form_errors(form) }}
        
        {{ form_row(form.translations) }}
        {{ form_row(form.entityCategory) }}
        <div class="form-group protagonist_typeahead" typeahead-callback="{{ path('entityuser_add', {'object': 'Event', 'user_id': 'USER_ID', 'protagonist_new_id': 'NEW_ID', 'entity_type': 'ENTITY_TYPE'}) }}">
            <div class="form-group col-lg-12"><label class="control-label col-lg-3 control-label required">{{ "Protagonists" | trans }}</label></div>
            <div class="col-lg-12 collection-items">
                <div class="cm_cmbundle_event_entityUsers_control_group">
                    <div id="protagonists_finder_container" class="form-group">
                        <label class="control-label col-lg-3">Add new protagonist</label>
                        <div class="col-lg-9"><input type="text" id="protagonists_finder" class="form-control" /></div>
                    </div>
                    {{ include('CMBundle:EntityUser:addEntityUsers.html.twig', {'entityUsers': form.entityUsers}) }}
                </div>
            </div>
        </div>

    {{ form_end(form) }}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
        <script type="text/javascript">
            var typeaheadHintRoute = "{{ path('user_typeahead_hint') }}";
        </script>
        {% javascripts
            '@CMBundle/Resources/public/js/hogan-2.0.0.min.js'
            '@CMBundle/Resources/public/js/typeahead.min.js'
            '@CMBundle/Resources/public/js/uploadCollection.js'
            '@CMBundle/Resources/public/js/form.js'
        %}
            <script type="text/javascript" src="{{ asset_url }}"></script>
        {% endjavascripts %}
        <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=places&language={{ app.request.locale }}"></script>
{% endblock %}