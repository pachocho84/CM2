{% extends "CMBundle:User:accountLayout.html.twig" %}

{% block section %}{{ 'Profile & cover pictures'|trans }}{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <style>
        #profile-pic .fileinput-preview,
        #cover-pic .fileinput-preview {
            border: 1px solid #bbbbbb;
            margin-bottom: 10px;
            position: relative;
        }
        #profile-pic .fileinput-preview img,
        #cover-pic .fileinput-preview img {
            height: 100%;
            position: absolute;
            top: 0px;
            left: 0px;
        }
    </style>
{% endblock %}

{% block main %}
    <div class="box">
        <div class="box-heading">
            <h2>{{ icon('Photo') }} {{ block('section') }}</h2>
        </div>
        <div class="box-body">
            
            <div class="alert alert-info">{{ icon('Alert') }} {{ 'Drag the images to adjust the position.'|trans }}</div>
            
            {{ form_start(form) }}
            
                <legend>{{ 'Profile picture'|trans }}</legend>

                <div id="profile-pic">
                    {{ form_row(form.imgFile, {imgEdit: {box: show_img_box(asset(uploaded_images_full_dir ~ '/' ~ user.img), {width: 150, offset: user.imgOffset, box_attributes: {class: 'fileinput-new', style: 'border: 1px solid #bbbbbb; margin-bottom: 10px;'}}), width: 152}}) }}
                </div>

                {{ form_row(form.imgOffset, {attr: {'img-offset-field': null}}) }}

                {#{% if user.img is not null %}
                    <div class="alert alert-info">{{ icon('Alert') }} {{ 'Drag the image to adjust position.'|trans }}</div>
                    {{ show_img_box(asset(uploaded_images_full_dir ~ '/' ~ user.img), {width: 150, height: 150, offset: user.imgOffset, box_attributes: {id: 'profile-pic', style: 'border: 1px solid #bbbbbb; margin-bottom: 15px;'}}) }}
                {% endif %}#}
                
                <legend>{{ 'Cover picture'|trans }}</legend>

                {% if user.coverImg is not null %}
                    <div id="cover-pic">
                        {{ form_row(form.coverImgFile, {imgEdit: {box: show_img_box(asset(uploaded_images_full_dir ~ '/' ~ user.coverImg), {width: 360, height: 150, offset: user.coverImgOffset, box_attributes: {class: 'fileinput-new', style: 'border: 1px solid #bbbbbb; margin-bottom: 10px;' }}), width: 362, height: 152}}) }}
                    </div>
                    {{ form_row(form.coverImgOffset, {attr: {'cover-img-offset-field': null}}) }}
                {% endif %}
            
                <div class="text-right">
                    {{ form_row(form.save) }}
                </div>
            {{ form_end(form) }}
        </div>
    </div>

{% endblock %}

